console.log('üîß Verificando pol√≠ticas RLS da tabela clinicas...');
console.log('');
console.log('‚ö†Ô∏è  Parece que a tabela clinicas tamb√©m tem pol√≠ticas RLS restritivas.');
console.log('');
console.log('üìã Para resolver, execute no SQL Editor do Supabase:');
console.log('');
console.log('-- Verificar pol√≠ticas existentes');
console.log('SELECT schemaname, tablename, policyname, permissive, roles, cmd, qual');
console.log('FROM pg_policies WHERE tablename = \'clinicas\';');
console.log('');
console.log('-- Se necess√°rio, criar pol√≠tica para permitir inser√ß√£o de cl√≠nicas');
console.log('CREATE POLICY IF NOT EXISTS "Users can create clinics"');
console.log('ON public.clinicas');
console.log('FOR INSERT');
console.log('WITH CHECK (');
console.log('  EXISTS (');
console.log('    SELECT 1 FROM public.user_roles');
console.log('    WHERE user_id = auth.uid()');
console.log('    AND role IN (\'proprietaria\', \'gerente\')');
console.log('    AND ativo = true');
console.log('  )');
console.log(');');
console.log('');
console.log('-- Pol√≠tica para visualizar cl√≠nicas');
console.log('CREATE POLICY IF NOT EXISTS "Users can view accessible clinics"');
console.log('ON public.clinicas');
console.log('FOR SELECT');
console.log('USING (');
console.log('  EXISTS (');
console.log('    SELECT 1 FROM public.user_roles');
console.log('    WHERE user_id = auth.uid()');
console.log('    AND (clinica_id = public.clinicas.id OR role IN (\'proprietaria\', \'super_admin\'))');
console.log('    AND ativo = true');
console.log('  )');
console.log(');');
console.log('');
console.log('Acesse: https://supabase.com/dashboard/project/dvnyfwpphuuujhodqkko/sql');