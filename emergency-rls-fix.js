console.log('üö® CORRE√á√ÉO EMERGENCIAL - RLS muito permissivo para onboarding');
console.log('');
console.log('‚ö†Ô∏è  Esta √© uma solu√ß√£o tempor√°ria para permitir o onboarding funcionar.');
console.log('   Depois que o onboarding estiver funcionando, voc√™ pode ajustar as pol√≠ticas.');
console.log('');
console.log('üìã Execute este SQL no Supabase:');
console.log('');
console.log('-- SOLU√á√ÉO TEMPOR√ÅRIA: Pol√≠tica muito permissiva');
console.log('');
console.log('-- 1. Remover todas as pol√≠ticas existentes');
console.log('DROP POLICY IF EXISTS "Users can create initial visitor role" ON public.user_roles;');
console.log('DROP POLICY IF EXISTS "Users can create their initial role" ON public.user_roles;');
console.log('DROP POLICY IF EXISTS "Users can update their own roles" ON public.user_roles;');
console.log('DROP POLICY IF EXISTS "Users can create clinics" ON public.clinicas;');
console.log('DROP POLICY IF EXISTS "Users can create their first clinic" ON public.clinicas;');
console.log('DROP POLICY IF EXISTS "Users can view accessible clinics" ON public.clinicas;');
console.log('DROP POLICY IF EXISTS "Users can view their clinics" ON public.clinicas;');
console.log('');
console.log('-- 2. Criar pol√≠ticas muito permissivas para onboarding');
console.log('CREATE POLICY "Allow onboarding user_roles"');
console.log('ON public.user_roles');
console.log('FOR ALL');
console.log('USING (auth.uid() = user_id)');
console.log('WITH CHECK (auth.uid() = user_id);');
console.log('');
console.log('CREATE POLICY "Allow onboarding clinicas"');
console.log('ON public.clinicas');
console.log('FOR ALL');
console.log('USING (true)  -- Muito permissivo temporariamente');
console.log('WITH CHECK (true);  -- Muito permissivo temporariamente');
console.log('');
console.log('-- 3. Garantir que RLS est√° habilitado');
console.log('ALTER TABLE public.user_roles ENABLE ROW LEVEL SECURITY;');
console.log('ALTER TABLE public.clinicas ENABLE ROW LEVEL SECURITY;');
console.log('');
console.log('üîó Acesse: https://supabase.com/dashboard/project/dvnyfwpphuuujhodqkko/sql');
console.log('');
console.log('‚ö†Ô∏è  LEMBRE-SE: Depois que o onboarding funcionar, ajuste as pol√≠ticas para serem mais restritivas!');